async function p(t,a){let n;for(const[e]of Object.entries(t)){const i=e.split("/content/").slice(1).join("/content/").replace(/\.(md|mdx)$/,"");if(i===a||i===`${a}/index`||i===`${a}/+page`||i===`${a}/article`){n=e;break}}if(!n)return null;const o=await t[n]();return{component:o.default,metadata:o.metadata||{},path:n,slug:a}}async function s(t){return await Promise.all(Object.entries(t).map(async([n,o])=>{const e=await o(),r=n.replace(/^.*\/content\//,"").replace(/\.(md|mdx)$/,"");return{component:e.default,metadata:e.metadata||{},path:n,slug:r}}))}function l(t,a=200){const n=t.split(/\s+/).length,o=Math.ceil(n/a);return o===1?"1 minute":`${o} minutes`}function u(t){const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=String(t.getDate()).padStart(2,"0"),e=t.getFullYear();return`${n} ${o} ${e}`}function m(t){return t instanceof Date?t:typeof t=="string"?new Date(t):new Date(0)}async function d(t,a){const n=await s(t),o=await Promise.all(n.map(async e=>{const r=m(e.metadata.date);let i="<1 minute";if(a){const c=await a[e.path]?.();c&&typeof c=="string"&&(i=l(c))}return{_dateObj:r,date:u(r),href:`/${e.slug}`,readingTime:i,title:e.metadata.title||"Untitled"}}));return o.sort((e,r)=>r._dateObj.getTime()-e._dateObj.getTime()),o.map(({_dateObj:e,...r})=>r)}export{d as a,p as l};
